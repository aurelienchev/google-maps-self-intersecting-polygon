function myLineSegment(t,e,n,o){this.startCoords=t,this.endCoords=e,this.startIndex=n,this.endIndex=o,this.x1=t.lng(),this.y1=t.lat(),this.x2=e.lng(),this.y2=e.lat()}function myIntersectionPoint(t,e,n){this.coordinates=t,this.originalLine=e,this.selectionLine=n}function myPointInside(t,e){this.coordinates=t,this.pathIndex=e}google.maps.Polygon.prototype.validate=function(t){"number"!=typeof t&&(t=null);for(var e=this.getLineSegments(),n=this.getLineSegments(t),o=0,i=n.length;o<i;o++)for(var r=0,s=e.length;r<s;r++)if(n[o].isIntersecting(e[r]))return!1;return!0},google.maps.Polygon.prototype.getLineSegments=function(t){"number"!=typeof t&&(t=-1);var e=[],n=this.getPath(),o=n.getLength()-1;if(t>=0&&t<=o){for(var i=0===t?o:t-1,r=0,s=2;r<s;r++){var g=n.getAt(i),a=i;if(i===o)var l=n.getAt(0),u=0;else var l=n.getAt(i+1),u=i+1;i===o?i=0:i++,e.push(new myLineSegment(g,l,a,u))}return e}for(var r=0,s=n.getLength();r<s;r++){var g=n.getAt(r),a=r;if(r==o)var l=n.getAt(0),u=0;else var l=n.getAt(r+1),u=r+1;e.push(new myLineSegment(g,l,a,u))}return e},google.maps.Polygon.prototype.countPointsInside=function(t){if(!(t instanceof google.maps.Polygon))return null;for(var e=0,n=t.getPath(),o=0,i=n.getLength();o<i;o++)google.maps.geometry.poly.containsLocation(n.getAt(o),this)&&e++;return e},google.maps.Polygon.prototype.getPointsInside=function(t){if(!(t instanceof google.maps.Polygon))return null;for(var e=[],n=t.getPath(),o=0,i=n.getLength();o<i;o++)if(google.maps.geometry.poly.containsLocation(n.getAt(o),this)){var r=n.getAt(o),s=o;e.push(new myPointInside(r,s))}return e},google.maps.Polygon.prototype.containsPoint=function(t){return t instanceof google.maps.LatLng?google.maps.geometry.poly.containsLocation(t,this):null},google.maps.Polygon.prototype.countIntersections=function(t){if(!(t instanceof google.maps.Polygon))return null;for(var e=0,n=this.getLineSegments(),o=t.getLineSegments(),i=0,r=n.length;i<r;i++)for(var s=0,g=o.length;s<g;s++)n[i].isIntersecting(o[s])&&e++;return e},google.maps.Polygon.prototype.getIntersections=function(t){if(!(t instanceof google.maps.Polygon))return null;for(var e=[],n=this.getLineSegments(),o=t.getLineSegments(),i=0,r=n.length;i<r;i++)for(var s=0,g=o.length;s<g;s++)if(n[i].isIntersecting(o[s])){var a=n[i].getIntersectionPoint(o[s]),l=n[i],u=o[s];e.push(new myIntersectionPoint(a,l,u))}return 0===e.length?[]:function(t){return t.sort(function(t,e){if(t.originalLine.startIndex>e.originalLine.startIndex)return 1;if(t.originalLine.startIndex<e.originalLine.startIndex)return-1;if(t.isOnSameLine(e)){var n=google.maps.geometry.spherical.computeDistanceBetween(t.coordinates,t.originalLine.startCoords),o=google.maps.geometry.spherical.computeDistanceBetween(e.coordinates,t.originalLine.startCoords);if(n>o)return 1;if(n<o)return-1}return 0})}(e)},myLineSegment.prototype.isIntersecting=function(t){function n(t,n,o){return a=t.lng(),b=t.lat(),c=n.lng(),d=n.lat(),e=o.lng(),f=o.lat(),(f-b)*(c-a)>(d-b)*(e-a)}if(!(t instanceof myLineSegment))return!1;var o=this.startCoords,i=this.endCoords,r=t.startCoords,s=t.endCoords;return o!==r&&o!==s&&i!==r&&i!==s&&(n(o,r,s)!=n(i,r,s)&&n(o,i,r)!=n(o,i,s))},myLineSegment.prototype.getSlope=function(){return this.x1===this.x2?null:this.y1===this.y2?0:(this.y2-this.y1)/(this.x2-this.x1)},myLineSegment.prototype.getYIntercept=function(){return null===this.getSlope()?null:0===this.getSlope()?this.y1:this.y1-this.getSlope()*this.x1},myLineSegment.prototype.getUnderneathArea=function(){return(this.x2-this.x1)*(this.y2+this.y1)},myLineSegment.prototype.getIntersectionPoint=function(t){if(!(t instanceof myLineSegment))return null;if(!this.isIntersecting(t))return null;var e,n,o=this.getSlope(),i=this.getYIntercept(),r=t.getSlope(),s=t.getYIntercept();return null!=i&&null!=s?0===o?(e=(i-s)/r,n=i):0===r?(e=(s-i)/o,n=s):n=o*(e=(s-i)/(o-r))+i:null===o?0===r?(e=this.x1,n=t.y1):n=(e=this.x1)*r+s:null===r&&(0===o?(e=t.x1,n=this.y1):n=(e=t.x1)*o+i),new google.maps.LatLng(n,e)},myIntersectionPoint.prototype.isOnSameLine=function(t){return t instanceof myIntersectionPoint&&(this.originalLine.startIndex===t.originalLine.startIndex&&this.originalLine.endIndex===t.originalLine.endIndex)};